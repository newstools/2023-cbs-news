A federal judge has ordered Boeing Co. to be arraigned on a felony charge stemming from crashes of two 737 Max jets, a ruling that threatens to unravel an agreement Boeing negotiated to avoid prosecution. The two crashes, which occurred in 2018 and 2019, killed 346 people. The ruling by a judge in Texas came after relatives of some of the victims said the government violated their rights by reaching a settlement with Boeing without first notifying the families. U.S. District Court Judge Reed O'Connor ordered Boeing to send a representative to his courtroom in Fort Worth Jan. 26 for arraignment. O'Connor ruled last year that relatives of those killed in the crashes are crime victims under federal law and should have been consulted before the Justice Department agreed to a deal under which Boeing paid $2.5 billion to avoid prosecution on a criminal count of defrauding federal regulators who approved the 737 Max. "We are pleased that the court has agreed with our request for an arraignment, and rejected arguments from Boeing and the U.S. Justice Department," attorney Paul G. Cassell, who is representing families of some of the victims, said in a statement to CBS News Thursday. Most of the money from the settlement went to airlines that couldn't use their Max jets for nearly two years after the planes were grounded worldwide. Boeing agreed to pay a $243.6 million fine and create a $500 million fund to compensate victims' families. Last September, Boeing also paid $200 million to settle charges from the Securities and Exchange Commission over allegations it misled the public and investors by claiming the plane was safe despite knowing that a flight-control system posed a safety risk. On Oct. 18, 2018, Lion Air Flight 610 crashed into the ocean off West Java, Indonesia, shortly after takeoff. All 189 people aboard died. About five months later, on March 10, 2019, Ethiopian Airlines Flight 302 crashed, also just after takeoff, near Addis Ababa, killing all 157 people aboard.